# KOSPI Fear & Greed Index Backend

í•œêµ­ ì£¼ì‹ì‹œì¥(KOSPI)ì˜ Fear & Greed Indexë¥¼ ê³„ì‚°í•˜ê³  ì œê³µí•˜ëŠ” ë°±ì—”ë“œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“Š Fear & Greed Index ê³„ì‚°
- **5ê°€ì§€ êµ¬ì„±ìš”ì†Œ**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¢…í•©ì ì¸ ì‹œì¥ ì‹¬ë¦¬ ì§€ìˆ˜
- 0-100 ë²”ìœ„ì˜ ì ìˆ˜ì™€ 5ë‹¨ê³„ ë ˆë²¨ ë¶„ë¥˜
- ì‹¤ì‹œê°„ ì‹ ë¢°ë„ í‰ê°€ ì‹œìŠ¤í…œ

### ğŸ“ˆ ë°ì´í„° ìˆ˜ì§‘ ì‹œìŠ¤í…œ
- **KRX (í•œêµ­ê±°ë˜ì†Œ)**: KOSPI ì§€ìˆ˜, íˆ¬ììë³„ ë§¤ë§¤ë™í–¥, ì˜µì…˜ ë°ì´í„°
- **BOK (í•œêµ­ì€í–‰)**: ê¸ˆë¦¬, í™˜ìœ¨, ê²½ì œì§€í‘œ ë°ì´í„°
- ìë™í™”ëœ ì¼ì¼ ë°ì´í„° ìˆ˜ì§‘ ìŠ¤ì¼€ì¤„ëŸ¬

### ğŸ”„ API ì„œë¹„ìŠ¤
- RESTful APIë¥¼ í†µí•œ ë°ì´í„° ì œê³µ
- ì‹¤ì‹œê°„ ì§€ìˆ˜ ì¡°íšŒ ë° íˆìŠ¤í† ë¦¬ ë°ì´í„°
- ê´€ë¦¬ììš© ìˆ˜ë™ ë°ì´í„° ìˆ˜ì§‘ ê¸°ëŠ¥

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Data Sources  â”‚    â”‚   Collectors    â”‚    â”‚   Calculator    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ KRX API       â”‚â”€â”€â”€â–¶â”‚ â€¢ KRXCollector  â”‚â”€â”€â”€â–¶â”‚ FearGreedCalc   â”‚
â”‚ â€¢ BOK API       â”‚    â”‚ â€¢ BOKCollector  â”‚    â”‚                 â”‚
â”‚ â€¢ Public APIs   â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   Database      â”‚    â”‚   API Server    â”‚             â”‚
â”‚                 â”‚    â”‚                 â”‚             â”‚
â”‚ â€¢ MySQL/Prisma  â”‚â—€â”€â”€â”€â”‚ â€¢ Express.js    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Data Models   â”‚    â”‚ â€¢ REST APIs     â”‚
â”‚ â€¢ Logging       â”‚    â”‚ â€¢ Middleware    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ Fear & Greed Index êµ¬ì„±ìš”ì†Œ

| êµ¬ì„±ìš”ì†Œ | ê°€ì¤‘ì¹˜ | ì„¤ëª… |
|---------|--------|------|
| **ì£¼ê°€ ëª¨ë©˜í…€** | 25% | KOSPI ì§€ìˆ˜ì˜ ì´ë™í‰ê·  ë¶„ì„ |
| **íˆ¬ìì ì‹¬ë¦¬** | 25% | ì™¸êµ­ì¸/ê°œì¸/ê¸°ê´€ ë§¤ë§¤ íë¦„ |
| **Put/Call ë¹„ìœ¨** | 20% | ì˜µì…˜ ì‹œì¥ì˜ í’‹/ì½œ ê±°ë˜ ë¹„ìœ¨ |
| **ë³€ë™ì„± ì§€ìˆ˜** | 15% | VKOSPI ë˜ëŠ” ì—­ì‚¬ì  ë³€ë™ì„± |
| **ì•ˆì „ìì‚° ìˆ˜ìš”** | 15% | êµ­ì±„ ìˆ˜ìµë¥  ì»¤ë¸Œ ë¶„ì„ |

### ì§€ìˆ˜ ë ˆë²¨ ë¶„ë¥˜
- **0-20**: Extreme Fear (ê·¹ë„ì˜ ê³µí¬)
- **21-40**: Fear (ê³µí¬)
- **41-60**: Neutral (ì¤‘ë¦½)
- **61-80**: Greed (íƒìš•)
- **81-100**: Extreme Greed (ê·¹ë„ì˜ íƒìš•)

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. í™˜ê²½ ì„¤ì •

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)

```env
# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL="mysql://username:password@localhost:3306/kospi_fg_index"

# API í‚¤
BOK_API_KEY="your_bok_api_key_here"
KRX_API_KEY="your_krx_api_key_here"

# ì„œë²„ ì„¤ì •
PORT=3000
NODE_ENV=development

# ë³´ì•ˆ ì„¤ì •
CORS_ENABLED=true
HELMET_ENABLED=true
ALLOWED_ORIGINS="http://localhost:8080,http://localhost:3000"
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```bash
# Prisma ë§ˆì´ê·¸ë ˆì´ì…˜
npx prisma migrate dev

# Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±
npx prisma generate
```

### 4. ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ëª¨ë“œ
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
npm start
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ê¸°ë³¸ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
```bash
npm run test:basic
```

### ë°ì´í„° ìˆ˜ì§‘ê¸° í…ŒìŠ¤íŠ¸
```bash
npm run test:collectors
```

### ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
```bash
npm run test:system
```

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### Fear & Greed Index

#### ìµœì‹  ì§€ìˆ˜ ì¡°íšŒ
```http
GET /api/fear-greed/latest
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": {
    "date": "2024-01-15",
    "value": 53,
    "level": "Neutral",
    "confidence": 85,
    "components": {
      "priceMomentum": 65,
      "investorSentiment": 45,
      "putCallRatio": 60,
      "volatilityIndex": 40,
      "safeHavenDemand": 50
    },
    "updatedAt": "2024-01-15T18:00:00.000Z"
  }
}
```

#### íˆìŠ¤í† ë¦¬ ì¡°íšŒ
```http
GET /api/fear-greed/history?days=30
```

### ì‹œì¥ ë°ì´í„°

#### ìµœì‹  KOSPI ë°ì´í„°
```http
GET /api/market/kospi/latest
```

### ì‹œìŠ¤í…œ ê´€ë¦¬

#### ì‹œìŠ¤í…œ ìƒíƒœ ì¡°íšŒ
```http
GET /api/system/status
```

#### ìˆ˜ë™ ë°ì´í„° ìˆ˜ì§‘ (ê´€ë¦¬ì)
```http
POST /api/admin/collect-data
Content-Type: application/json

{
  "date": "2024-01-15",
  "sources": ["KRX", "BOK"]
}
```

#### Fear & Greed Index ìˆ˜ë™ ê³„ì‚° (ê´€ë¦¬ì)
```http
POST /api/admin/calculate-index
Content-Type: application/json

{
  "date": "2024-01-15"
}
```

## â° ìë™í™” ìŠ¤ì¼€ì¤„

ì‹œìŠ¤í…œì€ ë‹¤ìŒ ì¼ì •ìœ¼ë¡œ ìë™ ë°ì´í„° ìˆ˜ì§‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

- **06:00 (í‰ì¼)**: BOK ê²½ì œ ë°ì´í„° ìˆ˜ì§‘
- **15:45 (í‰ì¼)**: KRX ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
- **18:00 (í‰ì¼)**: Fear & Greed Index ê³„ì‚°
- **00:00 (ë§¤ì¼)**: ì‹œìŠ¤í…œ ìœ ì§€ë³´ìˆ˜

### ìˆ˜ë™ ìŠ¤ì¼€ì¤„ëŸ¬ ì œì–´

```bash
# ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘
npm run start:scheduler

# íŠ¹ì • ë‚ ì§œ ë°ì´í„° ìˆ˜ì§‘
npm run collect:data

# ê³¼ê±° ë°ì´í„° ìˆ˜ì§‘
npm run collect:historical
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ì£¼ìš” í…Œì´ë¸”

- **fear_greed_index**: Fear & Greed Index ì¼ì¼ ë°ì´í„°
- **kospi_data**: KOSPI ì§€ìˆ˜ ë°ì´í„°
- **investor_trading**: íˆ¬ììë³„ ë§¤ë§¤ë™í–¥
- **option_data**: ì˜µì…˜ ê±°ë˜ ë°ì´í„°
- **interest_rate_data**: ê¸ˆë¦¬ ë°ì´í„°
- **exchange_rate_data**: í™˜ìœ¨ ë°ì´í„°
- **economic_indicator_data**: ê²½ì œì§€í‘œ ë°ì´í„°
- **data_collection_log**: ë°ì´í„° ìˆ˜ì§‘ ë¡œê·¸

## ğŸ”§ ê°œë°œ ë„êµ¬

### ì½”ë“œ í’ˆì§ˆ
```bash
# ë¦°íŒ…
npm run lint
npm run lint:fix

# í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
npm run test:coverage
```

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
```bash
# Prisma Studio (GUI)
npx prisma studio

# ë°ì´í„°ë² ì´ìŠ¤ ë¦¬ì…‹
npx prisma migrate reset
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ë¡œê·¸ ë ˆë²¨
- **INFO**: ì¼ë°˜ì ì¸ ì‹œìŠ¤í…œ ë™ì‘
- **WARN**: ì£¼ì˜ê°€ í•„ìš”í•œ ìƒí™©
- **ERROR**: ì˜¤ë¥˜ ë° ì˜ˆì™¸ ìƒí™©

### ì„±ëŠ¥ ë©”íŠ¸ë¦­
- ë°ì´í„° ìˆ˜ì§‘ ì†Œìš” ì‹œê°„
- API ì‘ë‹µ ì‹œê°„
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒíƒœ

## ğŸš¨ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸
npx prisma db push

# ì—°ê²° í…ŒìŠ¤íŠ¸
npm run test:basic
```

#### 2. API í‚¤ ì˜¤ë¥˜
- `.env` íŒŒì¼ì˜ API í‚¤ í™•ì¸
- BOK/KRX API í‚¤ ìœ íš¨ì„± ê²€ì¦

#### 3. ë°ì´í„° ìˆ˜ì§‘ ì‹¤íŒ¨
```bash
# ìˆ˜ì§‘ê¸° ê°œë³„ í…ŒìŠ¤íŠ¸
npm run test:collectors

# ë¡œê·¸ í™•ì¸
tail -f logs/application.log
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- API í‚¤ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
- CORS ì„¤ì •ìœ¼ë¡œ í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
- Helmet.jsë¥¼ í†µí•œ ë³´ì•ˆ í—¤ë” ì„¤ì •
- Rate limitingìœ¼ë¡œ API ë‚¨ìš© ë°©ì§€

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

- ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±
- API ì‘ë‹µ ìºì‹±
- ë³‘ë ¬ ë°ì´í„° ìˆ˜ì§‘
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.

---

**ê°œë°œì**: KOSPI Fear & Greed Index Team  
**ë²„ì „**: 1.0.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024ë…„ 1ì›” 