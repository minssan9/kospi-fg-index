# KOSPI Fear & Greed Index ê¸°ìˆ  ìŠ¤íƒ ë° ì•„í‚¤í…ì²˜

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Frontend Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vue 3 + Quasar + Chart.js + Pinia + Google AdSense             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTPS/REST API
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Backend Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Node.js + Express + TypeScript + JWT + CORS                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Collector â”‚ â”‚   Database      â”‚ â”‚  External APIs  â”‚
â”‚   (Scheduler)   â”‚ â”‚  (PostgreSQL)   â”‚ â”‚   (KRX, BOK)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

### Frontend Stack

#### ğŸ¨ **Vue 3 Ecosystem**
```json
{
  "vue": "^3.4.0",
  "vue-router": "^4.2.0",
  "pinia": "^2.1.0",
  "@vueuse/core": "^10.7.0"
}
```

**ì„ íƒ ì´ìœ **:
- Composition APIë¥¼ í†µí•œ ë¡œì§ ì¬ì‚¬ìš©ì„±
- ë›°ì–´ë‚œ ì„±ëŠ¥ê³¼ ë²ˆë“¤ í¬ê¸° ìµœì í™”
- TypeScript ì§€ì› ìš°ìˆ˜
- í™œë°œí•œ ìƒíƒœê³„

#### ğŸ¯ **Quasar Framework**  
```json
{
  "@quasar/cli": "^2.3.0",
  "quasar": "^2.14.0"
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ**: ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ êµ¬ì„±
- **ì»´í¬ë„ŒíŠ¸**: ì¹´ë“œ, ì°¨íŠ¸, í…Œì´ë¸” ë“±
- **ë°˜ì‘í˜•**: ëª¨ë°”ì¼ ìš°ì„  ë””ìì¸
- **í…Œë§ˆ**: ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì§€ì›

#### ğŸ“Š **ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬**
```json
{
  "chart.js": "^4.2.0",
  "vue-chartjs": "^5.2.0",
  "echarts": "^5.4.0"
}
```

**ì°¨íŠ¸ ìœ í˜•**:
- **ë¼ì¸ ì°¨íŠ¸**: ì¼ë³„ Fear & Greed Index ì¶”ì´
- **ë„ë„› ì°¨íŠ¸**: í˜„ì¬ ì‹œì¥ ì‹¬ë¦¬ ìƒíƒœ
- **íˆíŠ¸ë§µ**: ì›”ë³„/ë¶„ê¸°ë³„ ì‹¬ë¦¬ ë³€í™”
- **íˆìŠ¤í† ê·¸ë¨**: ì§€ìˆ˜ ë¶„í¬ í˜„í™©

#### ğŸ­ **ìƒíƒœ ê´€ë¦¬ (Pinia)**
```typescript
// stores/fearGreedStore.ts
export const useFearGreedStore = defineStore('fearGreed', () => {
  const currentIndex = ref<number>(0)
  const historicalData = ref<FearGreedData[]>([])
  const loading = ref<boolean>(false)

  const fetchLatestIndex = async () => {
    loading.value = true
    // API í˜¸ì¶œ ë¡œì§
  }

  return {
    currentIndex,
    historicalData,
    loading,
    fetchLatestIndex
  }
})
```

### Backend Stack

#### ğŸŸ¢ **Node.js + Express**
```json
{
  "node": ">=18.0.0",
  "express": "^4.18.0",
  "typescript": "^5.3.0",
  "@types/node": "^20.10.0"
}
```

**í”„ë¡œì íŠ¸ êµ¬ì¡°**:
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/     # API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ services/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ models/          # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ middleware/      # ë¯¸ë“¤ì›¨ì–´
â”‚   â”œâ”€â”€ utils/           # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ collectors/      # ë°ì´í„° ìˆ˜ì§‘ê¸°
â”‚   â””â”€â”€ schedulers/      # ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬
â”œâ”€â”€ prisma/              # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â””â”€â”€ tests/               # í…ŒìŠ¤íŠ¸ ì½”ë“œ
```

#### ğŸ—ƒ **ë°ì´í„°ë² ì´ìŠ¤ (PostgreSQL + Prisma)**
```json
{
  "postgresql": "^15.0",
  "prisma": "^5.7.0",
  "@prisma/client": "^5.7.0"
}
```

**ìŠ¤í‚¤ë§ˆ ì„¤ê³„**:
```prisma
// prisma/schema.prisma
model FearGreedIndex {
  id          String   @id @default(cuid())
  date        DateTime @unique
  value       Float
  level       String   // EXTREME_FEAR, FEAR, NEUTRAL, GREED, EXTREME_GREED
  components  Json     // ê° êµ¬ì„± ìš”ì†Œë³„ ì ìˆ˜
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("fear_greed_index")
}

model MarketIndicator {
  id              String   @id @default(cuid())
  date            DateTime
  kospiIndex      Float
  kospiChange     Float
  tradingVolume   BigInt
  foreignBuying   BigInt
  individualBuying BigInt
  institutionalBuying BigInt
  putCallRatio    Float?
  vkospi          Float?
  createdAt       DateTime @default(now())

  @@unique([date])
  @@map("market_indicators")
}
```

#### â° **ìŠ¤ì¼€ì¤„ëŸ¬ (node-cron)**
```typescript
// src/schedulers/dataCollector.ts
import cron from 'node-cron'
import { KRXCollector } from '../collectors/krxCollector'
import { BOKCollector } from '../collectors/bokCollector'

// í‰ì¼ 06:00 - í•œêµ­ì€í–‰ ë°ì´í„° ìˆ˜ì§‘
cron.schedule('0 6 * * 1-5', async () => {
  await BOKCollector.collectDailyData()
})

// í‰ì¼ 15:45 - KRX ì¥ë§ˆê° í›„ ë°ì´í„° ìˆ˜ì§‘
cron.schedule('45 15 * * 1-5', async () => {
  await KRXCollector.collectDailyData()
})

// í‰ì¼ 18:00 - Fear & Greed Index ê³„ì‚°
cron.schedule('0 18 * * 1-5', async () => {
  await FearGreedCalculator.calculateDailyIndex()
})
```

### Data Collection Layer

#### ğŸ“¡ **API í´ë¼ì´ì–¸íŠ¸**
```typescript
// src/collectors/krxCollector.ts
export class KRXCollector {
  private static baseURL = 'http://data.krx.co.kr/comm/bldAttendant/getJsonData.cmd'

  static async fetchKOSPIData(date: string) {
    const params = {
      bld: 'dbms/MDC/STAT/standard/MDCSTAT01501',
      locale: 'ko_KR',
      trdDd: date
    }
    
    return await this.apiCall(params)
  }

  static async fetchInvestorTrading(date: string) {
    const params = {
      bld: 'dbms/MDC/STAT/standard/MDCSTAT02203',
      locale: 'ko_KR',
      trdDd: date,
      mktId: 'STK'
    }
    
    return await this.apiCall(params)
  }
}
```

#### ğŸ§® **Fear & Greed ê³„ì‚° ì—”ì§„**
```typescript
// src/services/fearGreedCalculator.ts
export class FearGreedCalculator {
  private static weights = {
    priceMovement: 0.25,     // ì£¼ê°€ ì›€ì§ì„
    investorSentiment: 0.25, // íˆ¬ìì ì‹¬ë¦¬
    putCallRatio: 0.20,      // í’‹ì½œ ë¹„ìœ¨
    volatility: 0.15,        // ë³€ë™ì„±
    safeHaven: 0.15          // ì•ˆì „ìì‚° ìˆ˜ìš”
  }

  static async calculateIndex(date: string): Promise<number> {
    const indicators = await this.gatherIndicators(date)
    
    const scores = {
      priceScore: this.calculatePriceScore(indicators),
      sentimentScore: this.calculateSentimentScore(indicators),
      putCallScore: this.calculatePutCallScore(indicators),
      volatilityScore: this.calculateVolatilityScore(indicators),
      safeHavenScore: this.calculateSafeHavenScore(indicators)
    }

    return this.weightedAverage(scores)
  }

  private static calculatePriceScore(indicators: MarketIndicators): number {
    // KOSPI 20ì¼ ì´ë™í‰ê·  ëŒ€ë¹„ í˜„ì¬ ìœ„ì¹˜
    const ma20Position = indicators.currentPrice / indicators.ma20
    
    // 0-100 ìŠ¤ì¼€ì¼ë¡œ ì •ê·œí™”
    return Math.min(100, Math.max(0, (ma20Position - 0.9) * 500))
  }
}
```

### Infrastructure & DevOps

#### ğŸ³ **ì»¨í…Œì´ë„ˆí™” (Docker)**
```dockerfile
# Dockerfile.backend
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY dist/ ./dist/
COPY prisma/ ./prisma/

EXPOSE 3000

CMD ["npm", "start"]
```

```yaml
# docker-compose.yml
version: '3.8'

services:
  frontend:
    build: ./frontend
    ports:
      - "5000:5000"
    environment:
      - VITE_API_URL=http://localhost:3000

  backend:
    build: ./backend
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/feargreed
    depends_on:
      - db

  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=feargreed
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

#### ğŸš€ **CI/CD (GitHub Actions)**
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      - run: npm ci
      - run: npm test

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to server
        run: |
          # ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
```

### Google AdSense í†µí•©

#### ğŸ’° **ê´‘ê³  ë°°ì¹˜ ì „ëµ**
```vue
<!-- components/AdBanner.vue -->
<template>
  <div class="ad-container" :class="adSize">
    <ins 
      class="adsbygoogle"
      :style="adStyle"
      data-ad-client="ca-pub-XXXXXXXXX"
      :data-ad-slot="adSlot"
      data-ad-format="auto"
      data-full-width-responsive="true"
    ></ins>
  </div>
</template>

<script setup lang="ts">
interface Props {
  adSize: 'header' | 'sidebar' | 'content' | 'footer'
  adSlot: string
}

const props = defineProps<Props>()

onMounted(() => {
  (window.adsbygoogle = window.adsbygoogle || []).push({})
})
</script>
```

#### ğŸ“± **ë°˜ì‘í˜• ê´‘ê³  ë ˆì´ì•„ì›ƒ**
```scss
// styles/ads.scss
.ad-container {
  &.header {
    max-width: 728px;
    height: 90px;
    margin: 0 auto;
    
    @media (max-width: 768px) {
      max-width: 320px;
      height: 50px;
    }
  }

  &.sidebar {
    width: 300px;
    height: 250px;
    
    @media (max-width: 1024px) {
      display: none;
    }
  }

  &.content {
    max-width: 100%;
    min-height: 280px;
    margin: 20px 0;
  }
}
```

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### ë¡œì»¬ ê°œë°œ í™˜ê²½
```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/username/kospi-fg-index.git
cd kospi-fg-index

# 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
npm run db:migrate
npm run db:seed

# 5. ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

### í™˜ê²½ ë³€ìˆ˜ (.env)
```env
# Database
DATABASE_URL=postgresql://user:pass@localhost:5432/feargreed

# API Keys
KRX_API_KEY=your_krx_api_key
BOK_API_KEY=your_bok_api_key

# JWT
JWT_SECRET=your_jwt_secret

# Google AdSense
GOOGLE_ADSENSE_CLIENT=ca-pub-xxxxxxxxx

# Application
NODE_ENV=development
PORT=3000
FRONTEND_URL=http://localhost:5000
```

## ğŸ“Š ì„±ëŠ¥ ìµœì í™” ì „ëµ

### Frontend ìµœì í™”
- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: ë¼ìš°íŠ¸ë³„ lazy loading
- **ì´ë¯¸ì§€ ìµœì í™”**: WebP í¬ë§·, lazy loading
- **ë²ˆë“¤ ìµœì í™”**: Tree shaking, minification
- **CDN í™œìš©**: ì •ì  ìì‚° ë°°í¬

### Backend ìµœì í™”
- **ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±**: ì¿¼ë¦¬ ì„±ëŠ¥ ìµœì í™”
- **ìºì‹±**: Redisë¥¼ í†µí•œ API ì‘ë‹µ ìºì‹±
- **API ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ…**: ì™¸ë¶€ API í˜¸ì¶œ ìµœì í™”
- **ì••ì¶•**: gzip ì‘ë‹µ ì••ì¶•

### ëª¨ë‹ˆí„°ë§
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: New Relic, DataDog
- **ì—ëŸ¬ ì¶”ì **: Sentry
- **ë¡œê·¸ ê´€ë¦¬**: Winston + ELK Stack
- **ì—…íƒ€ì„ ëª¨ë‹ˆí„°ë§**: UptimeRobot

## ğŸ›¡ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### API ë³´ì•ˆ
- **JWT ì¸ì¦**: ì•ˆì „í•œ í† í° ê¸°ë°˜ ì¸ì¦
- **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
- **Rate Limiting**: API í˜¸ì¶œ ì œí•œ
- **Input Validation**: ì…ë ¥ ë°ì´í„° ê²€ì¦

### ë°ì´í„° ë³´ì•ˆ
- **ë°ì´í„°ë² ì´ìŠ¤ ì•”í˜¸í™”**: ë¯¼ê° ì •ë³´ ì•”í˜¸í™”
- **API í‚¤ ê´€ë¦¬**: í™˜ê²½ ë³€ìˆ˜ë¡œ ë¶„ë¦¬
- **HTTPS ê°•ì œ**: SSL/TLS í†µì‹ 
- **ì •ê¸° ë³´ì•ˆ ìŠ¤ìº”**: ì·¨ì•½ì  ì ê²€

---
**ì—…ë°ì´íŠ¸**: 2024ë…„ 12ì›”  
**ë‹¤ìŒ ë‹¨ê³„**: í”„ë¡œí† íƒ€ì… ê°œë°œ ì‹œì‘ 